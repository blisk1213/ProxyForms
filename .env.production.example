# ProxyForms Production Environment Variables
# Copy this file to .env.production and fill in the actual values
# Never commit the actual .env.production file to version control

# ==============================================================================
# NODE ENVIRONMENT
# ==============================================================================
NODE_ENV=production

# ==============================================================================
# APPLICATION URLS
# ==============================================================================
# Your production domain
NEXT_PUBLIC_APP_URL=https://your-domain.com

# API base URL (usually same as app URL)
NEXT_PUBLIC_API_URL=https://your-domain.com/api

# ==============================================================================
# DATABASE (PostgreSQL 17)
# ==============================================================================
# PostgreSQL connection string
# Format: postgresql://username:password@host:port/database?sslmode=require
DATABASE_URL=postgresql://postgres:your_password@your-postgres-host:5432/proxyforms?sslmode=require

# ==============================================================================
# AUTHENTICATION (Clerk)
# ==============================================================================
# Get these from https://dashboard.clerk.com
CLERK_SECRET_KEY=your_clerk_secret_key_here
CLERK_WEBHOOK_SECRET=your_clerk_webhook_secret_here

NEXT_PUBLIC_CLERK_PUBLISHABLE_KEY=your_clerk_publishable_key_here
NEXT_PUBLIC_CLERK_SIGN_IN_URL=/sign-in
NEXT_PUBLIC_CLERK_SIGN_UP_URL=/sign-up
NEXT_PUBLIC_CLERK_AFTER_SIGN_IN_URL=/blogs
NEXT_PUBLIC_CLERK_AFTER_SIGN_UP_URL=/blogs

# ==============================================================================
# PAYMENTS (Stripe)
# ==============================================================================
# Get these from https://dashboard.stripe.com
STRIPE_SECRET_KEY=your_stripe_secret_key_here
STRIPE_WEBHOOK_SECRET=your_stripe_webhook_secret_here
NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY=your_stripe_publishable_key_here

# ==============================================================================
# CACHE (Redis)
# ==============================================================================
# Redis connection URL
# Format: redis://:password@host:port or rediss:// for TLS
REDIS_URL=redis://:your_redis_password@your-redis-host:6379

# Optional: Redis password (if not in URL)
REDIS_PASSWORD=your_redis_password

# ==============================================================================
# OBJECT STORAGE (MinIO / S3)
# ==============================================================================
# MinIO/S3 endpoint (without protocol)
MINIO_ENDPOINT=storage.your-domain.com

# MinIO port (default: 9000)
MINIO_PORT=9000

# Use SSL/TLS (true for production)
MINIO_USE_SSL=true

# MinIO credentials (Access Key and Secret Key)
MINIO_ROOT_USER=your_access_key
MINIO_ROOT_PASSWORD=your_secret_key

# Bucket names
MINIO_BUCKET_IMAGES=proxyforms-images
MINIO_BUCKET_MEDIA=proxyforms-media

# Public URL for MinIO/S3 (for serving images to users)
NEXT_PUBLIC_MINIO_URL=https://cdn.your-domain.com

# ==============================================================================
# EMAIL (Resend)
# ==============================================================================
# Get API key from https://resend.com
RESEND_API_KEY=re_xxxxxxxxxxxxxxxxxxxxxxxxxxxxx

# Optional: Custom from email
# RESEND_FROM_EMAIL=noreply@your-domain.com
# RESEND_REPLY_TO_EMAIL=support@your-domain.com

# ==============================================================================
# OPTIONAL: AI FEATURES (OpenAI)
# ==============================================================================
# Get from https://platform.openai.com
# OPENAI_API_KEY=sk-xxxxxxxxxxxxxxxxxxxxxxxxxxxxx

# ==============================================================================
# OPTIONAL: ANALYTICS & MONITORING
# ==============================================================================

# PostHog (Analytics)
# Get from https://posthog.com
# NEXT_PUBLIC_POSTHOG_KEY=phc_xxxxxxxxxxxxxxxxxxxxxxxxxxxxx
# NEXT_PUBLIC_POSTHOG_HOST=https://eu.i.posthog.com

# Axiom (Logging)
# Get from https://axiom.co
# AXIOM_TOKEN=xaat-xxxxxxxxxxxxxxxxxxxxxxxxxxxxx
# AXIOM_ORG_ID=your-org-id

# Tinybird (Analytics)
# Get from https://tinybird.co
# TINYBIRD_TOKEN=p.xxxxxxxxxxxxxxxxxxxxxxxxxxxxx

# ==============================================================================
# LEGACY / DEPRECATED (will be removed after Supabase migration)
# ==============================================================================
# These are no longer required but may be needed during migration
# NEXT_PUBLIC_SUPABASE_URL=https://your-project.supabase.co
# NEXT_PUBLIC_SUPABASE_ANON_KEY=xxxxxxxxxxxxxxxxxxxxxxxxxxxxx
# SUPABASE_SERVICE_ROLE=xxxxxxxxxxxxxxxxxxxxxxxxxxxxx

# ==============================================================================
# BUILD CONFIGURATION
# ==============================================================================
# Set to skip environment validation during build (use with caution!)
# SKIP_ENV_VALIDATION=true

# ==============================================================================
# NOTES FOR PRODUCTION DEPLOYMENT
# ==============================================================================
#
# 1. DATABASE SETUP:
#    - Create PostgreSQL 17+ database
#    - Enable required extensions: uuid-ossp, pgcrypto, pg_trgm
#    - Use SSL/TLS connection (sslmode=require)
#    - Run migrations: bun run db:push
#
# 2. REDIS SETUP:
#    - Create Redis 7+ instance
#    - Enable AOF persistence
#    - Use password authentication
#    - Consider using managed service (Upstash Redis recommended)
#
# 3. MINIO/S3 SETUP:
#    - Create two buckets: proxyforms-images (public), proxyforms-media (private)
#    - Configure CORS for image bucket
#    - Set up CDN (CloudFlare/CloudFront) for NEXT_PUBLIC_MINIO_URL
#    - Enable SSL/TLS
#
# 4. CLERK SETUP:
#    - Create production application in Clerk
#    - Configure allowed redirect URLs
#    - Set up webhook endpoint: https://your-domain.com/api/webhooks/clerk
#    - Subscribe to events: user.created, user.updated, user.deleted
#
# 5. STRIPE SETUP:
#    - Use live mode keys (not test mode)
#    - Configure webhook endpoint: https://your-domain.com/api/webhooks/stripe
#    - Subscribe to events: customer.subscription.* (all subscription events)
#    - Test webhook delivery after deployment
#
# 6. RESEND SETUP:
#    - Verify your sending domain in Resend
#    - Set up SPF, DKIM, and DMARC records
#    - Test email delivery
#
# 7. MONITORING (Optional but recommended):
#    - Set up PostHog for user analytics
#    - Configure Axiom for log aggregation
#    - Add error tracking (Sentry recommended)
#    - Set up uptime monitoring (Betterstack/UptimeRobot)
#
# 8. SECURITY CHECKLIST:
#    - All secrets use strong, randomly generated values
#    - SSL/TLS enabled for all services
#    - Database firewall configured (allow only app server)
#    - Redis password protected
#    - Regular security updates enabled
#    - Backup strategy in place
#
# 9. PERFORMANCE OPTIMIZATION:
#    - Database connection pooling (PgBouncer recommended)
#    - Redis maxmemory policy configured
#    - CDN for static assets and images
#    - Edge caching for public API
#
# 10. BACKUP STRATEGY:
#     - Automated PostgreSQL backups (daily minimum)
#     - Redis AOF persistence + RDB snapshots
#     - MinIO/S3 bucket versioning enabled
#     - Store backups in separate region
#     - Test restore procedure monthly
#
